(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{a089d5de5d5c1c06e185:function(e,t,n){"use strict";n.r(t);var r=n("8af190b70a6bc55c6f1b"),o=n.n(r),i=n("0b3cb19af78752326f59"),a=n("ab4cb61bcb2dc161defb"),c=n("d7dd51e1bf6bfc2c9c3d"),u=n("a28fc3c963a1d4d1a2e5"),p=n("8a2d1b95e05b6a321e74"),d=n.n(p),s=n("5ef9de3df8d92ea0e41c"),f=n.n(s),l=n("5fa3f8487e09c6182715"),m=n.n(l),b=n("f3b0ff1628e56352bcbf"),y=n.n(b),v=n("a1cf5d6fa4ed65a6ddd5"),h=n.n(v),g=n("6a4f9c383785f9168266"),w=n.n(g),A=n("d3a850c4000d77bccc89"),_=n.n(A),O=n("f2873ecf7390fe7d7c89"),C=n.n(O);function S(e){var t={dispatch:y.a,subscribe:y.a,getState:y.a,replaceReducer:y.a,runSaga:y.a,injectedReducers:_.a,injectedSagas:_.a};w()(C()(e,t),"(app/utils...) injectors: Expected a valid redux store")}var j=n("491cc2e27aa2b4221847");function x(e,t){return function(n,r){t||S(e),w()(m()(n)&&!h()(n)&&y()(r),"(app/utils...) injectReducer: Expected `reducer` to be a reducer function"),Reflect.has(e.injectedReducers,n)&&e.injectedReducers[n]===r||(e.injectedReducers[n]=r,e.replaceReducer(Object(j.a)(e.injectedReducers)))}}function k(e){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T="@@saga-injector/restart-on-remount",R="@@saga-injector/daemon",M="@@saga-injector/once-till-unmount";function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){B(e,t,n[t])})}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=[T,R,M],W=function(e){return w()(m()(e)&&!h()(e),"(app/utils...) injectSaga: Expected `key` to be a non empty string")},H=function(e){var t={saga:y.a,mode:function(e){return m()(e)&&F.includes(e)}};w()(C()(e,t),"(app/utils...) injectSaga: Expected a valid saga descriptor")};function U(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;t||S(e);var i=Y({},r,{mode:r.mode||T}),a=i.saga,c=i.mode;W(n),H(i);var u=Reflect.has(e.injectedSagas,n);(!u||u&&c!==R&&c!==M)&&(e.injectedSagas[n]=Y({},i,{task:e.runSaga(a,o)}))}}function z(e,t){return function(n){if(t||S(e),W(n),Reflect.has(e.injectedSagas,n)){var r=e.injectedSagas[n];r.mode&&r.mode!==R&&(r.task.cancel(),e.injectedSagas[n]="done")}}}function L(e){return(L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J,Z=n("72110207b6499adb0ff6"),X=n.n(Z),Q=n("0a659e49a726b6fa3fb3"),ee=n("d4644582e3cddb2eda41"),te=n("8e4c85c29cdef1bf8a5f");function ne(e){return(ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t,n,r){J||(J="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:J,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==ne(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=i.c.div.withConfig({displayName:"ResourceSelector__ResourceSelectorWrapper",componentId:"sc-1ww0b6w-0"})(["width:100%;height:4rem;border-left:2px solid #3883bb;border-right:2px solid #3883bb;border-top:2px solid #3883bb;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;"]),pe=i.c.div.withConfig({displayName:"ResourceSelector__TodayWrapper",componentId:"sc-1ww0b6w-1"})(["width:calc(5.05rem - 2px);height:100%;text-align:center;padding:0.5rem;"]);pe.Button=i.c.div.withConfig({displayName:"ResourceSelector__Button",componentId:"sc-1ww0b6w-2"})(["border-radius:4px;background:#0071c5;color:#ffffff;width:100%;font-size:1rem;line-height:2.8;height:100%;cursor:pointer;"]);var de=i.c.div.withConfig({displayName:"ResourceSelector__ResourceSliderWrapper",componentId:"sc-1ww0b6w-3"})(["width:calc(100% - 5.05rem - (calc((100vw - 5.05rem) / 7)) + 1px);position:relative;"]),se=i.c.div.withConfig({displayName:"ResourceSelector__ResourceWrapper",componentId:"sc-1ww0b6w-4"})(["height:calc(4rem - 2px);position:relative;border-left:1px solid #3883bb;display:flex;"]),fe=i.c.div.withConfig({displayName:"ResourceSelector__Resource",componentId:"sc-1ww0b6w-5"})(["width:calc(100% / 6);padding:0.25rem;position:relative;border-right:1px solid #ddd;text-align:center;"]);fe.Avatar=i.c.div.withConfig({displayName:"ResourceSelector__Avatar",componentId:"sc-1ww0b6w-6"})(["padding:2px;& img{width:3rem;border-radius:50%;}"]),fe.OrderNumber=i.c.div.withConfig({displayName:"ResourceSelector__OrderNumber",componentId:"sc-1ww0b6w-7"})(["position:absolute;top:2px;right:2px;background:",";width:16px;height:16px;border-radius:50%;color:#ffffff;padding:2px;font-size:9px;line-height:1.3;"],function(e){return e.notEmpty?"#3883bb":"#ff1b22"}),fe.Title=i.c.div.withConfig({displayName:"ResourceSelector__Title",componentId:"sc-1ww0b6w-8"})(["position:absolute;bottom:0;left:0;background:#ffffff;width:100%;opacity:0.75;text-align:center;padding-bottom:4px;font-size:13px;line-height:1.3;"]);var le=i.c.div.withConfig({displayName:"ResourceSelector__PrevButton",componentId:"sc-1ww0b6w-9"})(["color:#3883bb;font-size:2rem;line-height:2rem;cursor:pointer;"]),me=i.c.div.withConfig({displayName:"ResourceSelector__NextButton",componentId:"sc-1ww0b6w-10"})(["color:#3883bb;font-size:2rem;line-height:2rem;cursor:pointer;"]),be=i.c.div.withConfig({displayName:"ResourceSelector__WaitingHeader",componentId:"sc-1ww0b6w-11"})(["width:calc((100vw - 5.05rem) / 7);text-align:center;line-height:64px;font-size:18px;color:#333333;background:#f4f4f5;border-left:1px solid #3883bb;"]);var ye=re(fe,{},void 0,re(te.a,{})),ve=re(ee.FaCaretLeft,{}),he=re(ee.FaCaretRight,{}),ge=re(be,{},void 0,"Waiting"),we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ie(this,ae(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentWillMount",value:function(){(0,this.props.loadMembers)()}},{key:"onPrevClick",value:function(e,t){t(e)}},{key:"onNextClick",value:function(e,t){t(e)}},{key:"afterSlide",value:function(e){var t=this.props,n=t.resources;(0,t.setDisplayedMembers)(n.slice(6*e,6*e+6))}},{key:"onTodayClick",value:function(){(0,this.props.onChangeToday)(X()().format("DDMMYYYY"))}},{key:"renderResource",value:function(e,t){var n=this.props.calendarMembers.find(function(t){return t.memberId===e.id}),r=n?n.appointments.length:0;return re(fe,{},t,re(fe.Avatar,{},void 0,re("img",{src:e.imageUrl,alt:e.orderNumber})),re(fe.OrderNumber,{notEmpty:r},void 0,e.orderNumber),re(fe.Title,{},void 0,e.title))}},{key:"renderResources",value:function(e,t){var n=this;return re(se,{},t,e.map(function(e,t){return n.renderResource(e,t)}))}},{key:"renderLoadingResources",value:function(e){return re(se,{},e,ye)}},{key:"renderCarouselSlide",value:function(){var e=this,t=this.props,n=t.loading,r=t.resources;return n?[1].map(function(t){return e.renderLoadingResources(t)}):function(e,t){for(var n=[],r=0;r<e.length;r+=1){var o=n[n.length-1];o&&o.length!==t?o.push(e[r]):n.push([e[r]])}return n}(r,6).map(function(t,n){return e.renderResources(t,n)})}},{key:"render",value:function(){var e=this;return re(ue,{},void 0,re(pe,{},void 0,re(pe.Button,{onClick:function(){return e.onTodayClick()}},void 0,"Today")),re(de,{},void 0,re(Q.a,{dragging:!1,renderBottomCenterControls:function(){return""},renderCenterLeftControls:function(t){var n=t.previousSlide;return re(le,{onClick:function(t){return e.onPrevClick(t,n)}},void 0,ve)},renderCenterRightControls:function(t){var n=t.nextSlide;return re(me,{onClick:function(t){return e.onNextClick(t,n)}},void 0,he)},afterSlide:function(t){return e.afterSlide(t)}},void 0,this.renderCarouselSlide())),ge)}}])&&oe(n.prototype,r),i&&oe(n,i),t}(),Ae=n("54f683fcda7806277002"),_e="app/Appointment/SELECT_DAY",Oe="app/Appointment/SELECT_WEEK",Ce="app/Appointment/SELECT_DAY_CALENDAR",Se="app/Appointment/SELECT_APPOINTMENT",je="app/Appointment/DESELECT_APPOINTMENT",xe="app/Appointment/OPEN_ADDING_APPOINTMENT",ke="app/Appointment/CLOSE_ADDING_APPOINTMENT",Ie="App/LOAD_MEMBERS",Pe="App/LOAD_MEMBERS_SUCCESS",Ne="App/LOAD_MEMBERS_ERROR",De="App/SET_DISPLAYED_MEMBERS",Ee="App/LOAD_WAITING_APPOINTMENT",Te="App/LOAD_WAITING_APPOINTMENT_SUCCESS",Re="App/ASSIGN_WAITING_APPOINTMENT_ERROR",Me="App/LOAD_APPOINTMENTS_BY_MEMBERS",Ye="App/LOAD_APPOINTMENTS_BY_MEMBERS_SUCCESS",Be="App/LOAD_APPOINTMENTS_BY_MEMBERS_ERROR",Fe="App/ASSIGN_APPOINTMENT",We="App/ASSIGN_APPOINTMENT_SUCCESS",He="App/ASSIGN_APPOINTMENT_ERROR",Ue="App/MOVE_APPOINTMENT",ze="App/MOVE_APPOINTMENT_SUCCESS",Le="App/MOVE_APPOINTMENT_ERROR",$e="App/PUT_BACK_APPOINTMENT",Ge="App/PUT_BACK_APPOINTMENT_SUCCESS",Ve="App/PUT_BACK_APPOINTMENT_ERROR",Ke="app/Appointment/CANCEL_APPOINTMENT",qe="app/Appointment/CANCEL_APPOINTMENT_SUCCESS",Je="app/Appointment/CANCEL_APPOINTMENT_ERROR",Ze="app/Appointment/UPDATE_STATUS_APPOINTMENT",Xe="app/Appointment/UPDATE_STATUS_APPOINTMENT_SUCCESS",Qe="app/Appointment/UPDATE_STATUS_APPOINTMENT_ERROR",et="app/Appointment/UPDATE_STATUS_APPOINTMENT_ERROR",tt="app/Appointment/CHECK_PHONE_ADD_CUSTOMER",nt="app/Appointment/CHECK_PHONE_ADD_CUSTOMER_SUCCESS",rt="app/Appointment/CHECK_PHONE_ADD_CUSTOMER_ERROR",ot="app/Appointment/ADD_CUSTOMER",it="app/Appointment/ADD_CUSTOMER_ERROR",at="UPDATE_WAITING_APPOINTMENT",ct="UPDATE_APPOINTMENT_STATUS";function ut(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){dt(e,t,n[t])})}return e}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st=X()(),ft=st.clone().startOf("isoWeek"),lt=[ft,ft.clone().add(1,"d"),ft.clone().add(2,"d"),ft.clone().add(3,"d"),ft.clone().add(4,"d"),ft.clone().add(5,"d"),ft.clone().add(6,"d")],mt=Object(Ae.fromJS)({loading:!1,error:!1,currentDay:st,currentWeekDays:lt,selectedAppointment:null,addingAppointment:null,selectedFCEvent:null,members:{all:[],displayed:[]},appointments:{calendar:[],waiting:[]},checkPhoneNumber_success:!1,checkPhoneNumber_error:!1,addCustomer_success:!1,addCustomer_error:!1});var bt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case _e:return t.set("currentDay",X()(n.day,"DDMMYYYY"));case Oe:return e=X()(n.dayOfWeek,"DDMMYYYY").startOf("isoWeek"),t.set("currentWeekDays",Object(Ae.fromJS)([e,e.clone().add(1,"d"),e.clone().add(2,"d"),e.clone().add(3,"d"),e.clone().add(4,"d"),e.clone().add(5,"d"),e.clone().add(6,"d")]));case Se:return t.set("selectedAppointment",n.appointment).set("selectedFCEvent",pt({},n.fcEvent));case je:return t.set("selectedAppointment",null).set("selectedFCEvent",null);case xe:return t.set("addingAppointment",n.appointment);case ke:return t.set("addingAppointment",null);case Ie:return t.set("loading",!0).set("error",!1).setIn(["members","all"],[]);case Pe:return t.setIn(["members","all"],n.members).set("loading",!1);case Ne:return t.set("error",n.error).set("loading",!1);case De:return t.setIn(["members","displayed"],n.members);case Ee:return t.setIn(["appointments","waiting"],[]);case Te:return t.setIn(["appointments","waiting"],n.appointments);case Re:return t.set("error",n.error);case Me:return t.setIn(["appointments","calendar"],[]);case Ye:return t.setIn(["appointments","calendar"],n.appointments);case Be:return t.set("error",n.error);case We:return t.updateIn(["appointments","calendar"],function(e){var t=e.find(function(e){return e.memberId===n.appointment.memberId});return t&&t.appointments.push(n.appointment),ut(e)}).updateIn(["appointments","waiting"],function(e){var t=e.findIndex(function(e){return e.id===n.appointment.id});return t<0?ut(e):(e.splice(t,1),ut(e))});case ze:return t.updateIn(["appointments","calendar"],function(e){var t=e.find(function(e){return e.appointments.find(function(e){return e.id===n.appointment.id})});if(!t)return ut(e);var r=t.appointments.findIndex(function(e){return e.id===n.appointment.id});if(r<0)return ut(e);t.appointments.splice(r,1);var o=e.findIndex(function(e){return e.memberId===n.appointment.memberId});return r<0?ut(e):(e[o].appointments.push(n.appointment),ut(e))});case Ge:return t.updateIn(["appointments","calendar"],function(e){var t=e.find(function(e){return e.appointments.find(function(e){return e.id===n.appointment.id})});if(!t)return ut(e);var r=t.appointments.findIndex(function(e){return e.id===n.appointment.id});return r<0?ut(e):(t.appointments.splice(r,1),ut(e))}).updateIn(["appointments","waiting"],function(e){return[pt({},n.appointment,{status:"WAITING",memberId:null,start:null})].concat(ut(e))});case qe:return t.updateIn(["appointments","calendar"],function(e){var t=e.find(function(e){return e.appointments.find(function(e){return e.id===n.appointmentId})});if(!t)return ut(e);var r=t.appointments.findIndex(function(e){return e.id===n.appointmentId});return r<0?ut(e):(t.appointments.splice(r,1),ut(e))});case Xe:return t.updateIn(["appointments","calendar"],function(e){var t=e.find(function(e){return e.appointments.find(function(e){return e.id===n.appointmentId})});if(!t)return ut(e);var r=t.appointments.findIndex(function(e){return e.id===n.appointmentId});if(r<0)return ut(e);var o=t.appointments[r].status;return"ASSIGNED"===o&&(t.appointments[r].status="CONFIRMED"),"CONFIRMED"===o&&(t.appointments[r].status="CHECKED_IN"),"CHECKED_IN"===o&&(t.appointments[r].status="PAID"),ut(e)});case at:return t.updateIn(["appointments","waiting"],function(e){return ut(e)});case nt:return t.set("checkPhoneNumber_success",n.phone);case rt:return t.set("checkPhoneNumber_error",n.error);default:return t}},yt=function(e){return e.get("appointment",mt)},vt=function(){return Object(u.a)(yt,function(e){return e.get("currentDay")})},ht=function(){return Object(u.a)(yt,function(e){return e.getIn(["members","displayed"])})},gt=function(){return Object(u.a)(yt,function(e){return e.getIn(["appointments","calendar"])})},wt=function(){return Object(u.a)(yt,function(e){return e.get("selectedFCEvent")})};function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_t(e,t,n[t])})}return e}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){return{type:_e,day:e}}function Ct(e){return{type:Oe,dayOfWeek:e}}function St(e){return{type:Ce,day:e}}function jt(){return{type:je}}function xt(e){return{type:Pe,members:e}}function kt(e){return{type:De,members:e}}function It(e){return{type:Te,appointments:e}}function Pt(e){return{type:Ye,appointments:e}}function Nt(e){return{type:We,appointment:e}}function Dt(e){return{type:He,error:e}}function Et(e){return{type:ze,appointment:e}}function Tt(e){return{type:Le,error:e}}function Rt(e){return{type:Ve,error:e}}function Mt(e){return{type:Je,error:e}}function Yt(e){return{type:Qe,error:e}}function Bt(e){return{type:tt,phone:e}}function Ft(e){return{type:nt,phone:e}}function Wt(e){return{type:rt,error:e}}var Ht=function(e){return{type:at,appointment:e}},Ut=function(e){return{type:ct,appointment:e}},zt=function(e){return{type:"UPDATE_APPOINTMENT_STATUS_SUCCESS",appointment:e}},Lt=function(e){return{type:"UPDATE_APPOINTMENT_STATUS_ERROR",error:e}};var $t,Gt=Object(u.b)({loading:Object(u.a)(yt,function(e){return e.get("loading")}),error:Object(u.a)(yt,function(e){return e.get("error")}),resources:Object(u.a)(yt,function(e){return e.getIn(["members","all"])}),calendarMembers:gt()}),Vt=Object(c.connect)(Gt,function(e){return{onChangeToday:function(t){return e(St(t))},loadMembers:function(t){return e({type:Ie})},setDisplayedMembers:function(t){return e(kt(t))}}}),Kt=Object(a.compose)(Vt)(we),qt=n("127c8cf59f228bb01a21"),Jt=n.n(qt);function Zt(e,t,n,r){$t||($t="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:$t,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Xt(e){return(Xt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e,t){return!t||"object"!==Xt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rn,on=Zt("div",{id:"full-calendar"}),an=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),en(this,tn(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.options;Jt()("#full-calendar").fullCalendar(e),setInterval(function(){Jt()(".fc-now-indicator-arrow").html(X()().format("HH:mm"))},500)}},{key:"render",value:function(){return on}}])&&Qt(n.prototype,r),i&&Qt(n,i),t}();n("c04ba74958b5b4603085");function cn(e){return(cn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t,n,r){rn||(rn="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:rn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dn(e,t){return!t||"object"!==cn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ln=i.c.div.withConfig({displayName:"FCDragZone__DragZoneWrapper",componentId:"sc-1jr0ymx-0"})(["height:calc(100vh - 4rem - 4rem - 4rem);#waiting-events{height:100%;overflow:scroll;}"]),mn=i.c.div.withConfig({displayName:"FCDragZone__EventWrapper",componentId:"sc-1jr0ymx-1"})(["background:#f4f4f5;border:1px solid #ffffff;color:#333333;"]);function bn(){var e=Jt()(this).data("event-information");Jt()(this).data("event",{data:e,color:"#ffe400",stick:!0}),Jt()(this).draggable({containment:"document",helper:"clone",appendTo:"body",zIndex:999,revert:!0,revertDuration:0})}var yn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dn(this,sn(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){Jt()("#waiting-events > div").each(bn)}},{key:"render",value:function(){var e=this.props.events;return un(ln,{},void 0,un("div",{id:"waiting-events"},void 0,e.map(function(e){return un(mn,{className:"app-event","data-event-information":JSON.stringify(e)},e.id,un("div",{className:"app-event__id-number"},void 0,"#",e.id),un("div",{className:"app-event__full-name"},void 0,e.userFullName),un("div",{className:"app-event__phone-number"},void 0,e.phoneNumber),e.options.map(function(e){return un("div",{className:"app-event__option"},e.id,"- ",e.name)}))})))}}])&&pn(n.prototype,r),i&&pn(n,i),t}(),vn=n("8b703812aa8ae3c41814");function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){gn(e,t,n[t])})}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wn,An={header:!1,defaultView:"agendaDay",groupByResource:!0,editable:!0,eventResourceEditable:!0,droppable:!0,height:"parent",allDaySlot:!1,nowIndicator:!0,slotLabelFormat:"HH:mm A",slotDuration:"00:15:00",eventOverlap:!1,minTime:"06:00:00",maxTime:"23:00:00",timezone:"local",resources:[{id:0},{id:1},{id:2},{id:3},{id:4},{id:5}],schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",eventClick:function(e){var t=vn.store.getState().getIn(["appointment","appointments","calendar"]).find(function(t){return t.appointments.find(function(t){return t.id===e.data.id})});if(t){var n=t.appointments.find(function(t){return t.id===e.data.id});n&&vn.store.dispatch(function(e,t){return{type:Se,appointment:e,fcEvent:t}}(n,e))}},drop:function(e,t,n,r){var o,i=this;if(e.isBefore(X()()))Jt()("#full-calendar").fullCalendar("removeEvents",function(e){return e.data.id===Jt()(i).data().event.data.id});else{var a=Jt()(this).data().event.data;vn.store.dispatch((o={eventData:hn({},a,{status:"ASSIGNED",start:"".concat(e.format("YYYY-MM-DD"),"T").concat(e.format("HH:mm:ss")),end:"".concat(e.clone().add("m",a.duration).format("YYYY-MM-DD"),"T").concat(e.clone().add("m",a.duration).format("HH:mm:ss"))}),resourceId:r},At({type:Fe},o)))}},eventDrop:function(e,t,n){var r,o,i,a;e.start.isBefore(X()())||"PAID"===e.data.status?n():vn.store.dispatch((r=e.data.id,o=e.resourceId,i="".concat(e.start.format("YYYY-MM-DD"),"T").concat(e.start.format("HH:mm:ss")),a="".concat(e.start.clone().add("m",e.data.duration).format("YYYY-MM-DD"),"T").concat(e.start.clone().add("m",e.data.duration).format("HH:mm:ss")),{type:Ue,appointmentId:r,newPositionIndex:o,newTime:i,newEndTime:a}))},eventDragStop:function(e,t){var n,r=Jt()("#drag-zone"),o=r.offset(),i=o.left,a=o.left+r.outerWidth(!0),c=o.top,u=o.top+r.outerHeight(!0);if(t.pageX>=i&&t.pageX<=a&&t.pageY>=c&&t.pageY<=u){Jt()("#full-calendar").fullCalendar("removeEvents",e._id);var p=vn.store.getState().getIn(["appointment","appointments","calendar"])[e.resourceId];vn.store.dispatch((n=hn({},e.data,{memberId:p.memberId}),{type:$e,appointment:n})),setTimeout(function(){Jt()("#waiting-events > div").each(function(){var e=Jt()(this).data("event-information");Jt()(this).data("event",{data:e,color:"#ffe400",stick:!0}),Jt()(this).draggable({zIndex:999,revert:!0,revertDuration:0})})},1e3)}},eventRender:function(e,t){t[0].innerHTML=function(e){return'\n  <div class="app-event">\n    <div class="app-event__id-number">#'.concat(e.id,'</div>\n    <div class="app-event__full-name">').concat(e.userFullName,'</div>\n    <div class="app-event__phone-number">').concat(e.phoneNumber,"</div>\n    ").concat(e.options.map(function(e){return function(e){return'<div class="app-event__option">- '.concat(e.name,"</div>")}(e)}).join(""),"\n  </div>\n")}(e.data)},resourceRender:function(e,t){t[0].innerHTML=""}},_n=function(e,t){Jt()("#full-calendar").fullCalendar("gotoDate",e),Jt()("#full-calendar").fullCalendar("removeEvents");var n=[];t.forEach(function(e,t){e.appointments.forEach(function(e){var r="#00b4f7";"ASSIGNED"===e.status&&(r="#ffe400"),"CONFIRMED"===e.status&&(r="#98e6f8"),"CHECKED_IN"===e.status&&(r="#00b4f7"),"PAID"===e.status&&(r="#00dc00"),n.push({resourceId:t,start:e.start,end:e.end,data:e,color:r,startEditable:!("PAID"===e.status),resourceEditable:!("PAID"===e.status)})})}),Jt()("#full-calendar").fullCalendar("renderEvents",n)},On=function(e){Jt()("#full-calendar").fullCalendar("removeEvents",[e])},Cn=function(e){var t,n=!0,r=!0,o=e.data.status;"ASSIGNED"===o&&(t="#ffe400"),"CONFIRMED"!==o&&"#ffe400"!==e.color||(t="#98e6f8"),"CHECKED_IN"!==o&&"#98e6f8"!==e.color||(t="#00b4f7"),"PAID"!==o&&"#00b4f7"!==e.color||(t="#00dc00",n=!1,r=!1),Jt()("#full-calendar").fullCalendar("updateEvent",hn({},e,{color:t,startEditable:n,resourceEditable:r}))},Sn=n("bd183afcc37eabd79225"),jn=n.n(Sn);function xn(e){return(xn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t,n,r){wn||(wn="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:wn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var En=location.search.replace("?token=",""),Tn=i.c.div.withConfig({displayName:"Calendar__CalendarWrapper",componentId:"sc-1wctk8v-0"})(["display:flex;border-left:2px solid #3883bb;border-right:2px solid #3883bb;border-bottom:2px solid #3883bb;height:calc(100% - 4rem - 4rem);overflow:hidden;"]),Rn=i.c.div.withConfig({displayName:"Calendar__MainCalendar",componentId:"sc-1wctk8v-1"})(["flex:1 0;border-right:1px solid #3883bb;"]),Mn=i.c.div.withConfig({displayName:"Calendar__RightSideBar",componentId:"sc-1wctk8v-2"})(["width:calc((100vw - 5.05rem) / 7);border-top:2px solid #3883bb;position:relative;"]),Yn=i.c.div.withConfig({displayName:"Calendar__SignInWrapper",componentId:"sc-1wctk8v-3"})(["position:absolute;bottom:0;width:calc((100vw - 5.05rem) / 7);background:#fafafa;height:4rem;text-align:center;padding:0.5rem;"]);Yn.Button=i.c.div.withConfig({displayName:"Calendar__Button",componentId:"sc-1wctk8v-4"})(["border-radius:4px;background:#0071c5;color:#ffffff;width:100%;font-size:1rem;line-height:2.8;height:100%;cursor:pointer;"]);var Bn=kn(Rn,{},void 0,kn(an,{options:An})),Fn=function(e){function t(){var e,n,r,o,i,a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return r=this,o=(e=Pn(t)).call.apply(e,[this].concat(p)),n=!o||"object"!==xn(o)&&"function"!==typeof o?Nn(r):o,i=Nn(n),c=function(e){jn.a.post("https://hp-api-dev.azurewebsites.net/api/Appointments/Waiting",{},{headers:{Authorization:"Bearer ".concat(En),"Content-Type":"application/json"}}).then(function(t){t.data.data.length>e.length&&n.props.loadWaitingAppointments()})},(a="checkWaiting5s")in i?Object.defineProperty(i,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[a]=c,n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentWillMount",value:function(){(0,this.props.loadWaitingAppointments)()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.updateCalendarInterval;setInterval(function(){t(),e.checkWaiting5s(e.props.waitingAppointments)},5e3)}},{key:"render",value:function(){var e=this.props,t=e.waitingAppointments,n=e.waitingIndex,r=e.openAddingAppointment;return kn(Tn,{},void 0,Bn,kn(Mn,{id:"drag-zone"},void 0,t&&t.length?kn(yn,{events:t,index:n}):"",kn(Yn,{},void 0,kn(Yn.Button,{onClick:function(){return r({})}},void 0,"Sign in"))))}}])&&In(n.prototype,r),i&&In(n,i),t}();var Wn,Hn=Object(u.b)({waitingAppointments:Object(u.a)(yt,function(e){return e.getIn(["appointments","waiting"])}),waitingIndex:Object(u.a)(yt,function(e){return e.getIn(["appointments","waitingIndex"])})}),Un=Object(c.connect)(Hn,function(e){return{loadWaitingAppointments:function(t){return e(At({type:Ee},t))},openAddingAppointment:function(t){return e({type:xe,appointment:t})},updateCalendarInterval:function(t){return e({type:et})},updateWaitingAppointment:function(t){return e(Ht(t))}}}),zn=Object(a.compose)(Un)(Fn),Ln=n("0d7f0986bcd2f33d8a2a"),$n=n("ac84d617ca1062960887"),Gn=n.n($n),Vn=(n("1c63ba327a1209defc64"),n("ce83741f5d4040dca12e")),Kn=n.n(Vn);function qn(e){return(qn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e,t,n,r){Wn||(Wn="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:Wn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xn(e,t){return!t||"object"!==qn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tr=i.c.div.withConfig({displayName:"MiniCalendar__MiniCalendarWrapper",componentId:"sc-18e5qik-0"})(["width:calc(5.05rem - 1px);height:100%;text-align:center;border-right:1px solid #3883bb;position:relative;padding:0.5rem;"]);tr.Button=i.c.div.withConfig({displayName:"MiniCalendar__Button",componentId:"sc-18e5qik-1"})(["border-radius:4px;background:#0071c5;color:#ffffff;width:100%;font-size:1.5rem;line-height:1.5;height:100%;cursor:pointer;"]);var nr=i.c.div.withConfig({displayName:"MiniCalendar__CalendarPopup",componentId:"sc-18e5qik-2"})(["top:0;left:0;position:absolute;transform:translate3d(0.5rem,calc(-18rem + 0.5rem),0px);will-change:transform;z-index:1;background:#fff;color:#000;height:18rem;line-height:1;box-shadow:2px 2px 10px rgba(0,0,0,0.1);border-radius:8px;overflow:hidden;"]);nr.Heading=i.c.div.withConfig({displayName:"MiniCalendar__Heading",componentId:"sc-18e5qik-3"})(["background:#0071c5;color:#ffffff;height:3rem;font-size:1.5rem;line-height:2;"]),nr.Body=i.c.div.withConfig({displayName:"MiniCalendar__Body",componentId:"sc-18e5qik-4"})([""]);var rr,or=Jn(nr.Heading,{},void 0,"Calendar"),ir=Jn(Ln.Helmet,{},void 0,Jn("style",{},void 0,"\n            .DayPicker-Day--today {\n              color: #00e260;\n            }\n          ")),ar=Jn(ee.FaCalendarAlt,{}),cr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xn(this,Qn(t).call(this,e))).state={isPopupOpen:!1},n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(t,o.a.Component),n=t,(r=[{key:"onClickButton",value:function(){var e=this.state.isPopupOpen;this.setState({isPopupOpen:!e})}},{key:"onOutsideClickPopup",value:function(){this.setState({isPopupOpen:!1})}},{key:"onDaySelected",value:function(e){(0,this.props.onChangeDay)(X()(new Date(e)).format("DDMMYYYY"))}},{key:"renderPopup",value:function(){var e=this,t=this.props.selectedDay;return this.state.isPopupOpen?Jn(nr,{},void 0,or,Jn(nr.Body,{},void 0,Jn(Gn.a,{firstDayOfWeek:1,selectedDays:[t.toDate()],onDayClick:function(t){return e.onDaySelected(t)}}))):""}},{key:"render",value:function(){var e=this;return Jn(Kn.a,{onOutsideClick:function(){return e.onOutsideClickPopup()}},void 0,ir,Jn(tr,{},void 0,Jn(tr.Button,{onClick:function(){return e.onClickButton()}},void 0,ar),this.renderPopup()))}}])&&Zn(n.prototype,r),i&&Zn(n,i),t}();function ur(e){return(ur="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pr(e,t,n,r){rr||(rr="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:rr,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t){return!t||"object"!==ur(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mr,br=i.c.div.withConfig({displayName:"DaySlider__DateSliderWrapper",componentId:"sc-192q64y-0"})(["width:calc(100% - 5.05rem);position:relative;"]),yr=i.c.div.withConfig({displayName:"DaySlider__CarouselItem",componentId:"sc-192q64y-1"})(["display:flex;"]),vr=i.c.div.withConfig({displayName:"DaySlider__NormalDay",componentId:"sc-192q64y-2"})(["flex:1;border-right:1px solid #3883bb;text-align:center;padding:0.5rem;overflow:hidden;&:last-child{border-right:none;}& div{white-space:normal;text-overflow:ellipsis;overflow:hidden;}"]),hr=Object(i.c)(vr).withConfig({displayName:"DaySlider__ActiveDay",componentId:"sc-192q64y-3"})(["background:#0071c5;color:#ffffff;"]),gr=Object(i.c)(vr).withConfig({displayName:"DaySlider__TodayDay",componentId:"sc-192q64y-4"})(["background:#00e260;color:#ffffff;"]),wr=i.c.div.withConfig({displayName:"DaySlider__PrevButton",componentId:"sc-192q64y-5"})(["color:#3883bb;font-size:2rem;line-height:2rem;cursor:pointer;"]),Ar=i.c.div.withConfig({displayName:"DaySlider__NextButton",componentId:"sc-192q64y-6"})(["color:#3883bb;font-size:2rem;line-height:2rem;cursor:pointer;"]),_r=pr(ee.FaCaretLeft,{}),Or=pr(ee.FaCaretRight,{}),Cr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sr(this,fr(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(t,o.a.Component),n=t,(r=[{key:"onPrevClick",value:function(e,t){t(e);var n=this.props,r=n.days;(0,n.onChangeWeek)(r[0].subtract(1,"w").format("DDMMYYYY"))}},{key:"onNextClick",value:function(e,t){t(e);var n=this.props,r=n.days;(0,n.onChangeWeek)(r[0].add(1,"w").format("DDMMYYYY"))}},{key:"onDayClick",value:function(e){(0,this.props.onChangeDay)(e.format("DDMMYYYY"))}},{key:"renderDay",value:function(e){return o.a.createElement(o.a.Fragment,null,pr("div",{},void 0,e.format("dddd")),pr("div",{},void 0,e.format("MM/DD/YYYY")))}},{key:"renderItems",value:function(e,t){var n=this,r=this.props.selectedDay;return e.format("DDMMYYYY")===r.format("DDMMYYYY")?pr(hr,{onClick:function(){return n.onDayClick(e)}},t,this.renderDay(e)):e.format("DDMMYYYY")===X()().format("DDMMYYYY")?pr(gr,{onClick:function(){return n.onDayClick(e)}},t,this.renderDay(e)):pr(vr,{onClick:function(){return n.onDayClick(e)}},t,this.renderDay(e))}},{key:"render",value:function(){var e=this,t=this.props.days;return pr(br,{},void 0,pr(Q.a,{wrapAround:!0,dragging:!1,renderBottomCenterControls:function(){return""},renderCenterLeftControls:function(t){var n=t.previousSlide;return pr(wr,{onClick:function(t){return e.onPrevClick(t,n)}},void 0,_r)},renderCenterRightControls:function(t){var n=t.nextSlide;return pr(Ar,{onClick:function(t){return e.onNextClick(t,n)}},void 0,Or)}},void 0,pr(yr,{},void 0,t.map(function(t,n){return e.renderItems(t,n)})),pr(yr,{},void 0,t.map(function(t,n){return e.renderItems(t,n)})),pr(yr,{},void 0,t.map(function(t,n){return e.renderItems(t,n)}))))}}])&&dr(n.prototype,r),i&&dr(n,i),t}();function Sr(e){return(Sr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jr(e,t,n,r){mr||(mr="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:mr,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kr(e,t){return!t||"object"!==Sr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nr=i.c.div.withConfig({displayName:"DaySelector__DaySelectorWrapper",componentId:"rxtnnz-0"})(["width:100%;height:4rem;border-left:2px solid #3883bb;border-right:2px solid #3883bb;border-bottom:2px solid #3883bb;display:flex;"]),Dr=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=kr(this,Ir(t).call(this,e));var r=X()().startOf("isoWeek"),o=X()().endOf("isoWeek");n.days=[];for(var i=r;i<=o;)n.days.push(i),i=i.clone().add(1,"d");return n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.currentDay,n=e.weekDays,r=e.onChangeDay,o=e.onChangeWeek,i=e.onChangeDayOnCalendar;return jr(Nr,{},void 0,jr(cr,{selectedDay:t,onChangeDay:i}),jr(Cr,{days:n.valueSeq().toArray(),selectedDay:t,onChangeDay:r,onChangeWeek:o}))}}])&&xr(n.prototype,r),i&&xr(n,i),t}();var Er,Tr=Object(u.b)({currentDay:vt(),weekDays:Object(u.a)(yt,function(e){return e.get("currentWeekDays")})}),Rr=Object(c.connect)(Tr,function(e){return{onChangeDay:function(t){return e(Ot(t))},onChangeWeek:function(t){return e(Ct(t))},onChangeDayOnCalendar:function(t){return e(St(t))}}}),Mr=Object(a.compose)(Rr)(Dr),Yr=n("d433ee11c4833de99670"),Br=n("a230b9763ddae96228aa"),Fr=n.n(Br);function Wr(e){return(Wr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ur(e,t,n,r){Er||(Er="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:Er,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}location.search.replace("?token=","");var Kr=Object(i.c)(Yr.a).withConfig({displayName:"DetailAppointment__AppPopup",componentId:"sc-1ygvad7-0"})(["border-radius:1.5rem;padding:0 !important;border:none !important;overflow-y:scroll;height:450px;"]),qr=i.c.div.withConfig({displayName:"DetailAppointment__AppPopupWrapper",componentId:"sc-1ygvad7-1"})(["position:relative;"]);qr.Header=i.c.div.withConfig({displayName:"DetailAppointment__Header",componentId:"sc-1ygvad7-2"})(["height:3rem;font-size:26px;font-weight:bold;background:",";color:#ffffff;width:100%;padding:0.5rem 1rem;line-height:1.5;text-align:center;"],function(e){return e.backgroundColor}),qr.Close=i.c.div.withConfig({displayName:"DetailAppointment__Close",componentId:"sc-1ygvad7-3"})(["position:absolute;right:0.5rem;top:0.25rem;line-height:1;font-size:2rem;color:#ffffff;cursor:pointer;"]),qr.Body=i.c.div.withConfig({displayName:"DetailAppointment__Body",componentId:"sc-1ygvad7-4"})(["background:#ffffff;width:100%;padding:1rem 1rem 0 1rem;"]),qr.Footer=i.c.div.withConfig({displayName:"DetailAppointment__Footer",componentId:"sc-1ygvad7-5"})(["display:flex;padding:0.5rem 1rem 1rem 1rem;& > div{width:50%;text-align:center;}"]);var Jr=Object(i.c)(Kr).withConfig({displayName:"DetailAppointment__AppointmentPopup",componentId:"sc-1ygvad7-6"})(["width:50rem !important;"]),Zr=Object(i.c)(qr).withConfig({displayName:"DetailAppointment__AppointmentWrapper",componentId:"sc-1ygvad7-7"})([""]);Zr.Header=Object(i.c)(qr.Header).withConfig({displayName:"DetailAppointment__Header",componentId:"sc-1ygvad7-8"})([""]),Zr.Close=Object(i.c)(qr.Close).withConfig({displayName:"DetailAppointment__Close",componentId:"sc-1ygvad7-9"})([""]),Zr.Body=Object(i.c)(qr.Body).withConfig({displayName:"DetailAppointment__Body",componentId:"sc-1ygvad7-10"})([""]),Zr.Footer=Object(i.c)(qr.Footer).withConfig({displayName:"DetailAppointment__Footer",componentId:"sc-1ygvad7-11"})([""]);var Xr=i.c.div.withConfig({displayName:"DetailAppointment__UserInformation",componentId:"sc-1ygvad7-12"})(["display:flex;padding:0.5rem;& > div{width:50%;display:flex;justify-content:space-between;padding-right:1rem;}"]),Qr=i.c.button.withConfig({displayName:"DetailAppointment__AdjustButton",componentId:"sc-1ygvad7-13"})(["background:",";color:#ffffff;padding:2px 15px;margin:0 10px;border-radius:6px;cursor:",";"],function(e){return e.active?"#0071c5":"#dddddd"},function(e){return e.active?"pointer":"initial"}),eo=i.c.div.withConfig({displayName:"DetailAppointment__NoteWrapper",componentId:"sc-1ygvad7-14"})(["border:1px solid #dddddd;background:#eeeeee;padding:0.5rem;overflow-x:scroll;height:10rem;"]);eo.Form=i.c.form.withConfig({displayName:"DetailAppointment__Form",componentId:"sc-1ygvad7-15"})(["display:flex;& > input{flex:1;background:#ffffff;border:1px solid #dddddd;border-right:none;border-top-left-radius:4px;border-bottom-left-radius:4px;padding:0 1rem;}& > button{width:5rem;border-top-right-radius:4px;border-bottom-right-radius:4px;background:#0071c5;color:#ffffff;line-height:2.8;cursor:pointer;text-align:center;}"]);var to=i.c.div.withConfig({displayName:"DetailAppointment__NoteInformation",componentId:"sc-1ygvad7-16"})(["display:flex;padding:0.5rem;& > div:nth-child(1),& > div:nth-child(2){width:20%;}& > div:last-child{width:60%;}"]),no=i.c.div.withConfig({displayName:"DetailAppointment__AppointmentInformation",componentId:"sc-1ygvad7-17"})(["display:flex;padding:0.5rem;& > div{width:30%;display:flex;justify-content:space-between;padding-right:1rem;}"]),ro=i.c.button.withConfig({displayName:"DetailAppointment__Button",componentId:"sc-1ygvad7-18"})(["border-radius:4px;background:",";color:",";border:1px solid #dddddd;font-size:1rem;line-height:2.8;height:100%;cursor:pointer;text-align:center;padding:0 2rem;"],function(e){return e.primary?"#0071c5":"#eeeeee"},function(e){return e.primary?"#ffffff":"#333333"}),oo=i.c.img.withConfig({displayName:"DetailAppointment__Img",componentId:"sc-1ygvad7-19"})(["filter:invert(100%);"]),io=Object(i.c)(Kr).withConfig({displayName:"DetailAppointment__ConfirmationPopup",componentId:"sc-1ygvad7-20"})(["width:30rem !important;"]),ao=Object(i.c)(qr).withConfig({displayName:"DetailAppointment__ConfirmationWrapper",componentId:"sc-1ygvad7-21"})([""]);ao.Header=Object(i.c)(qr.Header).withConfig({displayName:"DetailAppointment__Header",componentId:"sc-1ygvad7-22"})([""]),ao.Body=Object(i.c)(qr.Body).withConfig({displayName:"DetailAppointment__Body",componentId:"sc-1ygvad7-23"})(["text-align:center;"]),ao.Close=Object(i.c)(qr.Close).withConfig({displayName:"DetailAppointment__Close",componentId:"sc-1ygvad7-24"})([""]),ao.Footer=Object(i.c)(qr.Footer).withConfig({displayName:"DetailAppointment__Footer",componentId:"sc-1ygvad7-25"})([""]);var co=Ur(Zr.Header,{backgroundColor:"#ffe400"},void 0,"Unconfirmed Appointment"),uo=Ur(Zr.Header,{backgroundColor:"#98e6f8"},void 0,"Confirmed Appointment"),po=Ur(Zr.Header,{backgroundColor:"#00b4f7"},void 0,"Checked-in Appointment"),so=Ur(Zr.Header,{backgroundColor:"#00b4f7"},void 0,"Paid Appointment"),fo=Ur(Zr.Header,{backgroundColor:"#00dc00"},void 0,"Appointment"),lo=Ur("span",{},void 0,"Customer name: "),mo=Ur("span",{},void 0,"Phone number: "),bo=Ur("span",{},void 0,"Arriving in: "),yo=Ur("div",{},void 0,"\xa0\xa0"),vo=Ur("span",{},void 0,"Total: "),ho=Ur("th",{width:"50%"},void 0,"Selected Services"),go=Ur("th",{width:"50%"},void 0,"Selected Products"),wo=Ur("button",{type:"submit"},void 0,Ur(oo,{src:Fr.a,alt:"icon"})),Ao=Ur(ee.FaTimesCircle,{}),_o=Ur(ee.FaTimesCircle,{}),Oo=Ur(ao.Header,{backgroundColor:"#00b4f7"},void 0,"Confirmation"),Co=Ur(ao.Body,{},void 0,"Do you want to Cancel this Appointment?"),So=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,n=!(o=(e=Lr(t)).call.apply(e,[this].concat(a)))||"object"!==Wr(o)&&"function"!==typeof o?$r(r):o,Vr($r(n),"state",{noteValue:"",confirmationModal:!1,services:[],products:[],notes:[{name:"Rickie Da Vinci",date:"05/22/2018",content:"Note about customer's service"},{name:"Rickie Da Vinci",date:"03/14/2018",content:"Note about customer's service"}]}),Vr($r(n),"updateStatusPaid",function(e){window.postMessage(JSON.stringify({appointmentId:e,action:"checkout"}))}),Vr($r(n),"renderNote",function(e,t){return Ur(to,{},t,Ur("div",{},void 0,Ur("strong",{},void 0,e.date)),Ur("div",{},void 0,e.name),Ur("div",{},void 0,Ur("i",{},void 0,e.content)))}),n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(t,o.a.Component),n=t,(r=[{key:"subtractService",value:function(e){this.setState(function(t){var n=t.services;return n[e].duration>=10&&(n[e].duration-=10),{services:n}})}},{key:"addService",value:function(e){this.setState(function(t){var n=t.services;return n[e].duration+=10,{services:n}})}},{key:"subtractProduct",value:function(e){this.setState(function(t){var n=t.products;return n[e].amount>=1&&(n[e].amount-=1),{products:n}})}},{key:"addProduct",value:function(e){this.setState(function(t){var n=t.products;return n[e].amount+=1,{products:n}})}},{key:"handleSubmit",value:function(e){var t=this.state,n=t.notes,r=t.noteValue;e.preventDefault(),this.setState({noteValue:"",notes:[{name:"Rickie Da Vinci",date:X()().format("DD/MM/YYYY"),content:r}].concat(Hr(n))})}},{key:"handleChange",value:function(e){this.setState({noteValue:e.target.value})}},{key:"getTotalPrice",value:function(){var e=this.state,t=e.services,n=e.products,r=0;return t.forEach(function(e){r+=e.price*(e.duration/10)}),n.forEach(function(e){r+=e.price*e.amount}),r}},{key:"getTotalDuration",value:function(){var e=this.state.services,t=0;return e.forEach(function(e){t+=e.duration}),t}},{key:"closeModal",value:function(){(0,this.props.deselectAppointment)()}},{key:"componentWillReceiveProps",value:function(e){e.appointment&&this.setState({services:e.appointment.options})}},{key:"openConfirmationModal",value:function(){this.setState({confirmationModal:!0})}},{key:"closeConfirmationModal",value:function(){this.setState({confirmationModal:!1})}},{key:"confirmCancelAppointment",value:function(){this.closeConfirmationModal();var e=this.props,t=e.appointment,n=e.cancelAppointment,r=this.state.services;n(t.id);var o=r.map(function(e){return"".concat(e.id,"@").concat(e.duration,"@").concat(t.memberId)});this.updateStatus("Waiting",o)}},{key:"nextStatus",value:function(){var e=this.props,t=e.appointment,n=e.nextStatus,r=this.state.services.map(function(e){return"".concat(e.id,"@").concat(e.duration,"@").concat(t.memberId)});"CONFIRMED"===t.status&&this.updateStatus("CheckIn",r),"ASSIGNED"===t.status&&this.updateStatus("Confirm",r),"CHECKED_IN"===t.status&&this.updateStatusPaid(t.id),n(t.id,r)}},{key:"updateStatus",value:function(e,t){var n=this.props.appointment;this.props.updateAppointment({appointment:n,total:this.getTotalPrice(),duration:this.getTotalDuration(),BookingServices2:t,status:e})}},{key:"renderHeader",value:function(){var e=this.props.appointment;return"ASSIGNED"===e.status?co:"CONFIRMED"===e.status?uo:"CHECKED_IN"===e.status?po:"PAID"===e.status?so:fo}},{key:"renderBody",value:function(){var e=this.props.appointment;return Ur(Zr.Body,{},void 0,Ur(Xr,{},void 0,Ur("div",{},void 0,lo,Ur("strong",{},void 0,e.userFullName)),Ur("div",{},void 0,mo,Ur("strong",{},void 0,e.phoneNumber))),this.renderServices(),this.renderProducts(),this.renderNotes(),Ur(no,{},void 0,Ur("div",{},void 0,bo,Ur("strong",{},void 0,X()(e.start).fromNow())),yo,Ur("div",{},void 0,vo,Ur("strong",{},void 0,"$",this.getTotalPrice()))))}},{key:"renderService",value:function(e,t){var n=this,r=this.props.appointment;return Ur("tr",{},t,Ur("td",{},void 0,e.name),Ur("td",{style:{textAlign:"center"}},void 0,Ur(Qr,{active:"PAID"!==r.status&&e.duration>10,disabled:"PAID"===r.status||e.duration<=10,onClick:function(){return n.subtractService(t)}},void 0,"-10'"),e.duration,Ur(Qr,{active:"PAID"!==r.status&&e.duration<90,disabled:"PAID"===r.status||e.duration>=90,onClick:function(){return n.addService(t)}},void 0,"+10'")),Ur("td",{style:{textAlign:"center"}},void 0,e.price*(e.duration/10)))}},{key:"renderServices",value:function(){var e=this,t=this.state.services;return Ur("table",{},void 0,Ur("thead",{},void 0,Ur("tr",{},void 0,ho,Ur("th",{width:"30%",style:{textAlign:"center"}},void 0,"Duration (ms)"),Ur("th",{style:{textAlign:"center"}},void 0,"Price ($)"))),Ur("tbody",{},void 0,t.map(function(t,n){return e.renderService(t,n)})))}},{key:"renderProduct",value:function(e,t){var n=this,r=this.props.appointment;return Ur("tr",{},t,Ur("td",{},void 0,e.name),Ur("td",{style:{textAlign:"center"}},void 0,Ur(Qr,{active:"PAID"!==r.status&&e.amount>1,disabled:"PAID"===r.status||e.amount<=1,onClick:function(){return n.subtractProduct(t)}},void 0,"-"),e.amount,Ur(Qr,{active:"PAID"!==r.status&&e.amount<5,disabled:"PAID"===r.status||e.amount>=5,onClick:function(){return n.addProduct(t)}},void 0,"+")),Ur("td",{style:{textAlign:"center"}},void 0,e.price*e.amount))}},{key:"renderProducts",value:function(){var e=this,t=this.state.products;return Ur("table",{},void 0,Ur("thead",{},void 0,Ur("tr",{},void 0,go,Ur("th",{width:"30%",style:{textAlign:"center"}},void 0,"Amount"),Ur("th",{style:{textAlign:"center"}},void 0,"Price ($)"))),Ur("tbody",{},void 0,t.map(function(t,n){return e.renderProduct(t,n)})))}},{key:"renderNotes",value:function(){var e=this,t=this.state.notes;return Ur(eo,{},void 0,Ur(eo.Form,{onSubmit:function(t){return e.handleSubmit(t)}},void 0,Ur("input",{value:this.state.noteValue,onChange:function(t){return e.handleChange(t)}}),wo),t.map(this.renderNote))}},{key:"renderNextStatusButton",value:function(){var e=this,t=this.props.appointment;return"ASSIGNED"===t.status?Ur(ro,{onClick:function(){return e.nextStatus()},primary:"true"},void 0,"Confirm"):"CONFIRMED"===t.status?Ur(ro,{onClick:function(){return e.nextStatus()},primary:"true"},void 0,"Check In"):"CHECKED_IN"===t.status?Ur(ro,{onClick:function(){return e.nextStatus()},primary:"true"},void 0,"Pay"):""}},{key:"render",value:function(){var e=this;return this.props.appointment?Ur("div",{},void 0,Ur(Jr,{closeOnDocumentClick:!0,open:!0,onOpen:function(){return e.openModal()},onClose:function(){return e.closeModal()}},void 0,Ur(Zr,{},void 0,Ur(Zr.Close,{onClick:function(){return e.closeModal()}},void 0,Ao),this.renderHeader(),this.renderBody(),Ur(Zr.Footer,{},void 0,Ur("div",{},void 0,Ur(ro,{onClick:function(){return e.openConfirmationModal()}},void 0,"Cancel")),Ur("div",{},void 0,this.renderNextStatusButton())))),Ur(io,{open:this.state.confirmationModal},void 0,Ur(ao,{},void 0,Ur(ao.Close,{onClick:function(){return e.closeConfirmationModal()}},void 0,_o),Oo,Co,Ur(ao.Footer,{},void 0,Ur("div",{},void 0,Ur(ro,{onClick:function(){return e.confirmCancelAppointment()}},void 0,"Yes")),Ur("div",{},void 0,Ur(ro,{primary:!0,onClick:function(){return e.closeConfirmationModal()}},void 0,"No")))))):""}}])&&zr(n.prototype,r),i&&zr(n,i),t}();var jo,xo=Object(u.b)({appointment:Object(u.a)(yt,function(e){return e.get("selectedAppointment")})}),ko=Object(c.connect)(xo,function(e){return{deselectAppointment:function(){return e(jt())},cancelAppointment:function(t){return e({type:Ke,appointmentId:t})},nextStatus:function(t,n){return e({type:Ze,appointmentId:t,bookingServices:n})},updateAppointment:function(t){e(Ut(t))}}}),Io=Object(a.compose)(ko)(So);function Po(e){return(Po="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t,n,r){jo||(jo="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:jo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function To(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yo=Object(i.c)(Yr.a).withConfig({displayName:"AddAppointment__AppPopup",componentId:"sc-1ijw8t4-0"})(["border-radius:1.5rem;padding:0 !important;border:none !important;overflow:hidden;"]),Bo=i.c.div.withConfig({displayName:"AddAppointment__AppPopupWrapper",componentId:"sc-1ijw8t4-1"})(["position:relative;"]);Bo.Header=i.c.div.withConfig({displayName:"AddAppointment__Header",componentId:"sc-1ijw8t4-2"})(["height:3rem;font-size:20px;font-weight:bold;background:",";color:#ffffff;width:100%;padding:0.5rem 1rem;line-height:1.5;text-align:center;"],function(e){return e.backgroundColor}),Bo.Close=i.c.div.withConfig({displayName:"AddAppointment__Close",componentId:"sc-1ijw8t4-3"})(["position:absolute;right:0.5rem;top:0.25rem;line-height:1;font-size:2rem;color:#ffffff;cursor:pointer;"]),Bo.Body=i.c.div.withConfig({displayName:"AddAppointment__Body",componentId:"sc-1ijw8t4-4"})(["background:#ffffff;width:100%;padding:1rem 1rem 0 1rem;"]),Bo.Footer=i.c.div.withConfig({displayName:"AddAppointment__Footer",componentId:"sc-1ijw8t4-5"})(["display:flex;padding:0.5rem 1rem 1rem 1rem;& > div{width:1000%;text-align:center;}"]);var Fo=Object(i.c)(Yo).withConfig({displayName:"AddAppointment__SearchingPopup",componentId:"sc-1ijw8t4-6"})(["width:30rem !important;"]),Wo=Object(i.c)(Bo).withConfig({displayName:"AddAppointment__SearchingWrapper",componentId:"sc-1ijw8t4-7"})([""]);Wo.Header=Object(i.c)(Bo.Header).withConfig({displayName:"AddAppointment__Header",componentId:"sc-1ijw8t4-8"})([""]),Wo.Body=Object(i.c)(Bo.Body).withConfig({displayName:"AddAppointment__Body",componentId:"sc-1ijw8t4-9"})(["text-align:center;"]),Wo.Close=Object(i.c)(Bo.Close).withConfig({displayName:"AddAppointment__Close",componentId:"sc-1ijw8t4-10"})([""]),Wo.Footer=Object(i.c)(Bo.Footer).withConfig({displayName:"AddAppointment__Footer",componentId:"sc-1ijw8t4-11"})([""]);var Ho=Object(i.c)(Yo).withConfig({displayName:"AddAppointment__AddingPopup",componentId:"sc-1ijw8t4-12"})(["width:30rem !important;"]),Uo=Object(i.c)(Bo).withConfig({displayName:"AddAppointment__AddingWrapper",componentId:"sc-1ijw8t4-13"})([""]);Uo.Header=Object(i.c)(Bo.Header).withConfig({displayName:"AddAppointment__Header",componentId:"sc-1ijw8t4-14"})([""]),Uo.Body=Object(i.c)(Bo.Body).withConfig({displayName:"AddAppointment__Body",componentId:"sc-1ijw8t4-15"})(["text-align:center;"]),Uo.Close=Object(i.c)(Bo.Close).withConfig({displayName:"AddAppointment__Close",componentId:"sc-1ijw8t4-16"})([""]),Uo.Footer=Object(i.c)(Bo.Footer).withConfig({displayName:"AddAppointment__Footer",componentId:"sc-1ijw8t4-17"})([""]);var zo=i.c.img.withConfig({displayName:"AddAppointment__Img",componentId:"sc-1ijw8t4-18"})(["filter:invert(100%);"]),Lo=i.c.div.withConfig({displayName:"AddAppointment__Label",componentId:"sc-1ijw8t4-19"})(["margin-bottom:1rem;"]),$o=i.c.form.withConfig({displayName:"AddAppointment__Form",componentId:"sc-1ijw8t4-20"})(["width:100%;text-align:center;&.left{text-align:left;input{text-align:left;}}input{width:100%;background:#ffffff;border:1px solid #dddddd;border-top-left-radius:4px;border-bottom-left-radius:4px;padding:0.5rem 1rem;margin-bottom:1rem;text-align:center;&.w-50{width:48%;}}"]),Go=i.c.button.withConfig({displayName:"AddAppointment__Button",componentId:"sc-1ijw8t4-21"})(["border-radius:4px;background:",";color:",";border:1px solid #dddddd;font-size:1rem;line-height:2.8;height:100%;cursor:pointer;text-align:center;padding:0 2rem;"],function(e){return e.primary?"#0071c5":"#eeeeee"},function(e){return e.primary?"#ffffff":"#333333"}),Vo=i.c.div.withConfig({displayName:"AddAppointment__NoteWrapper",componentId:"sc-1ijw8t4-22"})(["border:1px solid #dddddd;background:#eeeeee;padding:0.5rem;overflow-x:scroll;height:10rem;text-align:left;display:flex;flex-direction:column;justify-content:space-between;"]);Vo.Form=i.c.form.withConfig({displayName:"AddAppointment__Form",componentId:"sc-1ijw8t4-23"})(["display:flex;& > input{flex:1;background:#ffffff;border:1px solid #dddddd;border-right:none;border-top-left-radius:4px;border-bottom-left-radius:4px;padding:0 1rem;}& > button{width:5rem;border-top-right-radius:4px;border-bottom-right-radius:4px;background:#0071c5;color:#ffffff;line-height:2.8;cursor:pointer;text-align:center;}"]);var Ko=i.c.div.withConfig({displayName:"AddAppointment__NoteInformation",componentId:"sc-1ijw8t4-24"})(["display:flex;padding:0.5rem;& > div:nth-child(1),& > div:nth-child(2){width:20%;}& > div:last-child{width:60%;}"]),qo=location.search.replace("?token=",""),Jo=No(ee.FaTimesCircle,{}),Zo=No(Wo.Header,{backgroundColor:"#0071C5"},void 0,"Add Appointment"),Xo=No(Wo.Body,{},void 0,"Enter phone number"),Qo=No("div",{},void 0,No(Go,{id:"submit-create-appointment",type:"submit",primary:!0},void 0,"Next")),ei=No(ee.FaTimesCircle,{}),ti=No(Uo.Header,{backgroundColor:"#00b4f7"},void 0,"Add Appointment"),ni=No(Lo,{},void 0,"Phone number is not exist ! Get information !"),ri=No(Lo,{},void 0,"Customer Name"),oi=No(Lo,{},void 0,"Referrer Phone Number"),ii=No(Lo,{},void 0,"Note:"),ai=No("button",{type:"submit"},void 0,No(zo,{src:Fr.a,alt:"icon"})),ci=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=Eo(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==Po(o)&&"function"!==typeof o?To(r):o,Mo(To(n),"state",{isOpenSearchingPopup:!0,isOpenAddingPopup:!1,first_name:"",last_name:"",phone:"",phoneNumber:"",noteValue:"",notes:[],error_phone:"",success_addApointment:"",error_addApointment:""}),Mo(To(n),"handleSubmitAppointment",function(){var e=n.state,t=e.first_name,r=e.last_name,o=e.phoneNumber,i=new FormData;i.append("first_name",t),i.append("last_name",r),i.append("phone",o),jn.a.post("https://hp-api-dev.azurewebsites.net/api/AppointmentV2/AddNewUser",{first_name:t,last_name:r,phone:o},{headers:{Authorization:"Bearer ".concat(qo),"Content-Type":"application/json"}}).then(function(e){if("{}"===e.data.data);else{console.log(e.data);var t=e.data.data;window.postMessage(JSON.stringify({consumerId:t,action:"newAppointment"})),n.setState({first_name:"",last_name:"",phone:"",phoneNumber:"",success_addApointment:"Inserted customer"}),setTimeout(function(){n.setState({isOpenSearchingPopup:!1,isOpenAddingPopup:!1,success_addApointment:""})},2e3)}})}),Mo(To(n),"renderNote",function(e,t){return No(Ko,{},t,No("div",{},void 0,No("strong",{},void 0,e.date)),No("div",{},void 0,e.name),No("div",{},void 0,e.content))}),n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ro(e,t)}(t,o.a.Component),n=t,(r=[{key:"closeAllModal",value:function(){this.setState({isOpenSearchingPopup:!0,isOpenAddingPopup:!1,phoneNumber:""}),(0,this.props.closeAddingAppointment)()}},{key:"handleSubmitVerifyPhone",value:function(e){var t=this;e.preventDefault();var n=new FormData;n.append("phone",this.state.phoneNumber),jn.a.post("https://hp-api-dev.azurewebsites.net/api/AppointmentV2/FindUserByPhone",n,{headers:{Authorization:"Bearer ".concat(qo)}}).then(function(e){"{}"===e.data.data?t.setState({isOpenSearchingPopup:!1,isOpenAddingPopup:!0}):(window.postMessage(JSON.stringify({consumerId:e.data.data.user_id,action:"newAppointment"})),t.setState({error_phone:"This phone number already exist !!!"}),setTimeout(function(){t.setState({error_phone:""})},3e3))})}},{key:"handleChange",value:function(e){this.setState({phoneNumber:e.target.value})}},{key:"handleSubmitNote",value:function(e){e.preventDefault()}},{key:"handleChangeNote",value:function(e){this.setState({noteValue:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpenSearchingPopup,r=t.isOpenAddingPopup,o=t.notes,i=t.error_phone,a=t.success_addApointment;return this.props.appointment?No("div",{},void 0,No(Fo,{open:n,closeOnDocumentClick:!1},void 0,No(Wo,{},void 0,No(Wo.Close,{onClick:function(){return e.closeAllModal()}},void 0,Jo),Zo,Xo,No(Wo.Footer,{},void 0,No($o,{onSubmit:function(t){return e.handleSubmitVerifyPhone(t)}},void 0,No("input",{value:this.state.phoneNumber,onChange:function(t){return e.handleChange(t)},type:"number"}),Qo,i&&No("p",{style:{color:"red"}},void 0,i))))),No(Ho,{open:r,onClose:function(){return e.closeAllModal()},closeOnDocumentClick:!1},void 0,No(Uo,{},void 0,No(Uo.Close,{onClick:function(){return e.closeAllModal()}},void 0,ei),ti,No(Uo.Body,{},void 0,No($o,{onSubmit:function(e){return e.preventDefault()}},void 0,a&&No("p",{style:{color:"#8D9440"}},void 0,a),ni,No("input",{value:this.state.phoneNumber,type:"number",disabled:!0})),No($o,{className:"left",onSubmit:function(e){return e.preventDefault()}},void 0,ri,No("div",{style:{display:"flex",justifyContent:"space-between"}},void 0,No("input",{value:this.state.first_name,onChange:function(t){return e.setState({first_name:t.target.value})},placeholder:"First Name",className:"w-50"}),No("input",{value:this.state.last_name,onChange:function(t){return e.setState({last_name:t.target.value})},placeholder:"Last Name",className:"w-50"}))),No($o,{className:"left",onSubmit:function(e){return e.preventDefault()}},void 0,oi,No("input",{value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})},placeholder:"Phone number"})),No(Vo,{},void 0,ii,o.map(this.renderNote),No(Vo.Form,{onSubmit:function(e){return e.preventDefault()}},void 0,No("input",{value:this.state.noteValue,onChange:function(t){return e.handleChangeNote(t)}}),ai))),No(Uo.Footer,{},void 0,No("div",{},void 0,No(Go,{onClick:this.handleSubmitAppointment,type:"button",primary:!0},void 0,"Next")))))):""}}])&&Do(n.prototype,r),i&&Do(n,i),t}();var ui=Object(u.b)({appointment:Object(u.a)(yt,function(e){return e.get("addingAppointment")}),checkPhoneSuccess:Object(u.a)(yt,function(e){return e.get("checkPhoneNumber_success")}),checkPhoneError:Object(u.a)(yt,function(e){return e.get("checkPhoneNumber_error")})}),pi=Object(c.connect)(ui,function(e){return{closeAddingAppointment:function(){return e({type:ke})},checkPhoneNumberCustomer:function(t){return e(Bt(t))},checkPhoneNumberCustomerSuccess:function(t){return e(Ft(t))},checkPhoneNumberCustomerError:function(t){return e(Wt(t))},addCustomer:function(t){return e(function(e){return{type:ot,customer:e}}(t))}}}),di=Object(a.compose)(pi)(ci),si=n("7fa3d1d0596e1f2a0f74"),fi=n("74431d47afb6248fcb69"),li=n("6c68d13fe9e3e77d8fc4");function mi(e){return 204===e.status||205===e.status?null:e.json()}function bi(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function yi(e,t){return fetch(e,t).then(bi).then(mi)}const vi="https://hp-api-dev.azurewebsites.net/api",hi=`${vi}/Staff`,gi=`${vi}/Appointments/Waiting`,wi=`${vi}/Appointments/Member`,Ai=`${vi}/AppointmentV2/Update`,_i=`${vi}/AppointmentV2/FindUserByPhone`,Oi=`${vi}/AppointmentV2`;var Ci={result:"success",message:"Appointment successfully!"};function Si(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ji(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Si(i,r,o,a,c,"next",e)}function c(e){Si(i,r,o,a,c,"throw",e)}a(void 0)})}}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ki(e,t,n[t])})}return e}function ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ii,Pi=regeneratorRuntime.mark(da),Ni=regeneratorRuntime.mark(sa),Di=regeneratorRuntime.mark(fa),Ei=regeneratorRuntime.mark(la),Ti=regeneratorRuntime.mark(ma),Ri=regeneratorRuntime.mark(ba),Mi=regeneratorRuntime.mark(ya),Yi=regeneratorRuntime.mark(va),Bi=regeneratorRuntime.mark(ha),Fi=regeneratorRuntime.mark(ga),Wi=regeneratorRuntime.mark(wa),Hi=regeneratorRuntime.mark(Aa),Ui=regeneratorRuntime.mark(_a),zi=regeneratorRuntime.mark(Oa),Li=regeneratorRuntime.mark(Ca),$i=regeneratorRuntime.mark(Sa),Gi=regeneratorRuntime.mark(ja),Vi=regeneratorRuntime.mark(xa),Ki=regeneratorRuntime.mark(ka),qi=regeneratorRuntime.mark(Ia),Ji=regeneratorRuntime.mark(Pa),Zi=regeneratorRuntime.mark(Na),Xi=regeneratorRuntime.mark(Da),Qi=regeneratorRuntime.mark(Ea),ea=regeneratorRuntime.mark(Ta),ta=regeneratorRuntime.mark(Ra),na=regeneratorRuntime.mark(Ma),ra=location.search.replace("?token=",""),oa={"Content-Type":"application/json",Authorization:"Bearer ".concat(ra)},ia={UnConfirm:"ASSIGNED",Confirm:"CONFIRMED",CheckIn:"CHECKED_IN",Paid:"PAID",Waiting:"WAITING",Cancel:"CANCEL"},aa=function(e){var t=[];return e.options&&e.options.service&&e.options.service.forEach(function(e){t.push({id:e.id,name:e.name,duration:e.duration,price:e.price})}),{id:e.id,userFullName:e.userFullName,phoneNumber:e.phoneNumber,options:t,status:ia[e.status],memberId:e.staffId,start:e.start,end:e.end}},ca=function(e){return{id:e.id,title:"".concat(e.first_name," ").concat(e.last_name),imageUrl:e.imageurl&&"https://hp-api-dev.azurewebsites.net/".concat(e.imageurl)||"https://png.pngtree.com/svg/20161027/631929649c.svg",orderNumber:e.orderNumber}},ua={ASSIGNED:"UnConfirm",CONFIRMED:"Confirm",CHECKED_IN:"CheckIn",PAID:"Paid",WAITING:"Waiting",CANCEL:"Cancel"},pa=function(e){return ua[e]};function da(){var e,t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=new URL(hi),r.next=4,Object(li.b)(yi,e.toString(),{method:"POST",headers:oa});case 4:return t=r.sent,n=t&&t.data&&t.data.map(function(e){return ca(e)}),r.next=8,Object(li.d)(xt(n));case 8:return r.next=10,Object(li.d)(kt(n.slice(0,6)));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(0),r.next=16,Object(li.d)((o=r.t0,{type:Ne,error:o}));case 16:case"end":return r.stop()}var o},Pi,null,[[0,12]])}function sa(){var e,t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return"WAITING",r.prev=1,(e=new URL(gi)).searchParams.append("status","WAITING"),r.next=6,Object(li.b)(yi,e.toString(),{method:"POST",headers:oa});case 6:return t=r.sent,n=t&&t.data&&t.data.map(function(e){return aa(e)}),r.next=10,Object(li.d)(It(n));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(1),r.next=16,Object(li.d)((o=r.t0,{type:Re,error:o}));case 16:case"end":return r.stop()}var o},Ni,null,[[1,12]])}function fa(){var e,t,n,r,o,i,a,c,u;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(li.e)(ht());case 2:return e=p.sent,p.next=5,Object(li.e)(vt());case 5:return t=p.sent,n=t.format("YYYY-MM-DD")||X()().format("YYYY-MM-DD"),r=e.map(function(e){return e.id}),p.prev=8,o=new URL(wi),i=JSON.stringify({date:n,memberId:r}),p.next=13,Object(li.b)(yi,o.toString(),{method:"POST",headers:oa,body:i});case 13:return a=p.sent,c=a&&a.data&&a.data.map(function(e){return aa(e)}),u=e.map(function(e){return{memberId:e.id,appointments:c.filter(function(t){return t.memberId===e.id&&"WAITING"!==t.status})}}),p.next=18,Object(li.d)(Pt(u));case 18:_n(t,u),p.next=25;break;case 21:return p.prev=21,p.t0=p.catch(8),p.next=25,Object(li.d)((d=p.t0,{type:Be,error:d}));case 25:case"end":return p.stop()}var d},Di,null,[[8,21]])}function la(e){var t,n,r,o,i,a,c,u,p,d,s;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(li.e)(ht());case 2:return t=f.sent,n=t[e.resourceId],r=xi({},e.eventData,{memberId:n.id}),f.prev=5,o=r.id,i=r.memberId,a=r.start,c=r.end,(u=new FormData).append("id",o),f.next=11,Ha(Oi+"/id",u);case 11:if(p=f.sent,d=new URL(Ai),!(s=Ya(d.toString(),{id:o,Staff_id:i,StoreId:1,FromTime:a,ToTime:X()(c).add(60,"minutes").format().substr(0,19),total:0,duration:0,CheckinStatus:"CheckIn",PaidStatus:!0,Status:1,CreateDate:(new Date).toString().substring(0,15),User_id:p.data.data.user_id}))){f.next=19;break}return f.next=17,Object(li.d)(Nt(r));case 17:f.next=21;break;case 19:return f.next=21,Object(li.d)(Dt(s));case 21:f.next=27;break;case 23:return f.prev=23,f.t0=f.catch(5),f.next=27,Object(li.d)(Dt(f.t0));case 27:case"end":return f.stop()}},Ei,null,[[5,23]])}function ma(e){var t,n,r,o,i,a,c,u,p,d,s,f,l,m,b;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Object(li.e)(ht());case 2:return t=y.sent,y.next=5,Object(li.e)(gt());case 5:if(n=y.sent,r=t[e.newPositionIndex],o=n.find(function(t){return t.appointments.find(function(t){return t.id===e.appointmentId})})){y.next=11;break}return y.next=11,Object(li.d)(Tt("Cannot find previous position."));case 11:if(i=o.appointments.find(function(t){return t.id===e.appointmentId})){y.next=15;break}return y.next=15,Object(li.d)(Tt("Cannot find moved appointment."));case 15:return a=xi({},i,{start:e.newTime,end:e.newEndTime,memberId:r.id}),(c=new FormData).append("id",i.id),u=i.start,p=i.end,d=Date.parse(p)-Date.parse(u),s=Math.floor(d/6e4),f=X()(a.start).add(s,"minutes").format(),y.prev=23,y.next=26,Ha(Oi+"/id",c);case 26:if(l=y.sent,m=new URL(Ai),!(b=Fa(m.toString(),{id:a.id,Staff_id:a.memberId,StoreId:1,FromTime:a.start,ToTime:f.substr(0,19),total:l.data.data.total,duration:l.data.data.duration,CheckinStatus:l.data.data.checkinStatus,PaidStatus:!0,Status:1,CreateDate:(new Date).toString().substring(0,15),BookingServices2:l.data.data.bookingServices2,User_id:l.data.data.user_id}))){y.next=34;break}return y.next=32,Object(li.d)(Et(a));case 32:y.next=36;break;case 34:return y.next=36,Object(li.d)(Tt(b));case 36:y.next=42;break;case 38:return y.prev=38,y.t0=y.catch(23),y.next=42,Object(li.d)(Tt(y.t0));case 42:case"end":return y.stop()}},Ti,null,[[23,38]])}function ba(e){var t,n,r,o,i,a,c,u,p;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,Object(fi.b)(200);case 3:return t=e.appointment,n=t.id,r=t.memberId,o=t.start,i=t.end,(a=new FormData).append("id",n),d.next=8,Ha(Oi+"/id",a);case 8:if(c=d.sent,u=new URL(Ai),!(p=Ya(u.toString(),{id:n,Staff_id:r,StoreId:1,FromTime:o,ToTime:i,total:0,duration:0,CheckinStatus:"Waiting",PaidStatus:!0,Status:1,CreateDate:(new Date).toString().substring(0,15),User_id:c.data.data.user_id}))){d.next=16;break}return d.next=14,Object(li.d)((s=e.appointment,{type:Ge,appointment:s}));case 14:d.next=18;break;case 16:return d.next=18,Object(li.d)(Rt(p));case 18:d.next=24;break;case 20:return d.prev=20,d.t0=d.catch(0),d.next=24,Object(li.d)(Rt(d.t0));case 24:case"end":return d.stop()}var s},Ri,null,[[0,20]])}function ya(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(li.e)(wt());case 2:if(t=r.sent){r.next=6;break}return r.next=6,Object(li.d)(Mt("Cannot find selected fcEvent"));case 6:return r.prev=6,r.next=9,Object(fi.b)(200);case 9:if(!(n=Ci)){r.next=18;break}return r.next=13,Object(li.d)((o=e.appointmentId,{type:qe,appointmentId:o}));case 13:return On(t._id),r.next=16,Object(li.d)(jt());case 16:r.next=20;break;case 18:return r.next=20,Object(li.d)(Mt(n));case 20:r.next=26;break;case 22:return r.prev=22,r.t0=r.catch(6),r.next=26,Object(li.d)(Mt(r.t0));case 26:case"end":return r.stop()}var o},Mi,null,[[6,22]])}function va(e){var t,n,r,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(li.e)(wt());case 2:if(t=a.sent){a.next=6;break}return a.next=6,Object(li.d)(Yt("Cannot find selected fcEvent"));case 6:return a.prev=6,n=new URL(Ai),"UnConfirm"==(r=pa(t.data.status))?r="Confirm":"Confirm"==r?r="CheckIn":"CheckIn"==r&&(r="Paid"),o={method:"POST",headers:oa,body:JSON.stringify({id:t.data.id,Staff_id:t.data.memberId,StoreId:1,FromTime:t.data.start,ToTime:t.data.end,TipPercent:null,User_id:null,total:1,duration:1,waitingtime:1,CheckinStatus:r,PaidStatus:!1,Status:1,CreateDate:t.data.start,BookingServices2:e.bookingServices})},a.next=13,Object(li.b)(yi,n.toString(),o);case 13:if(!(i=a.sent)){a.next=22;break}return a.next=17,Object(li.d)((c=e.appointmentId,{type:Xe,appointmentId:c}));case 17:return Cn(t),a.next=20,Object(li.d)(jt());case 20:a.next=24;break;case 22:return a.next=24,Object(li.d)(Yt(i));case 24:a.next=30;break;case 26:return a.prev=26,a.t0=a.catch(6),a.next=30,Object(li.d)(Yt(a.t0));case 30:case"end":return a.stop()}var c},Yi,null,[[6,26]])}function ha(e){var t,n,r,o,i,a,c,u,p,d,s,f,l,m,b;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,t=e.appointment,n=t.appointment,r=t.total,o=t.duration,i=t.BookingServices2,a=t.status,c=n.memberId,u=n.start,p=n.end,d=n.id,(s=new FormData).append("id",d),f=X()(p).add(o,"minutes").format(),y.next=8,Ha(Oi+"/id",s);case 8:if(l=y.sent,m=new URL(Ai),!(b=Fa(m.toString(),{id:d,Staff_id:c,StoreId:1,FromTime:u,ToTime:f.substr(0,19),total:r,duration:o,CheckinStatus:a,PaidStatus:!0,Status:1,CreateDate:(new Date).toString().substring(0,15),BookingServices2:i,User_id:l.data.data.user_id}))){y.next=16;break}return y.next=14,Object(li.d)(zt(b));case 14:y.next=18;break;case 16:return y.next=18,Object(li.d)(Lt(error));case 18:y.next=24;break;case 20:return y.prev=20,y.t0=y.catch(0),y.next=24,Object(li.d)(Lt(y.t0));case 24:case"end":return y.stop()}},Bi,null,[[0,20]])}function ga(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,console.log(e.customer),t.next=8;break;case 4:return t.prev=4,t.t0=t.catch(0),t.next=8,Object(li.d)((n=t.t0,{type:it,error:n}));case 8:case"end":return t.stop()}var n},Fi,null,[[0,4]])}function wa(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(t=new FormData).append("phone",e.phone),r.next=5,jn.a.post(_i,t,{headers:{Authorization:"Bearer ".concat(ra)}});case 5:if("{}"!==(n=r.sent).data.data){r.next=11;break}return r.next=9,Object(li.d)(Ft(!0));case 9:r.next=14;break;case 11:return window.postMessage(JSON.stringify({consumerId:n.data.data.user_id,action:"newAppointment"})),r.next=14,Object(li.d)(Bt({error:"This phone number already exist!!!"}));case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(li.d)(Wt(r.t0));case 20:case"end":return r.stop()}},Wi,null,[[0,16]])}function Aa(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(li.d)(Ot(e.day));case 2:return t.next=4,Object(li.d)(Ct(e.day));case 4:case"end":return t.stop()}},Hi)}function _a(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.d)({type:Me});case 2:case"end":return e.stop()}},Ui)}function Oa(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Ce,Aa);case 2:case"end":return e.stop()}},zi)}function Ca(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Ie,da);case 2:case"end":return e.stop()}},Li)}function Sa(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Ee,sa);case 2:case"end":return e.stop()}},$i)}function ja(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Me,fa);case 2:return e.next=4,Object(li.f)(Xe,fa);case 4:return e.next=6,Object(li.f)(_e,fa);case 6:return e.next=8,Object(li.f)(et,fa);case 8:case"end":return e.stop()}},Gi)}function xa(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(De,_a);case 2:case"end":return e.stop()}},Vi)}function ka(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Fe,la);case 2:case"end":return e.stop()}},Ki)}function Ia(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Ue,ma);case 2:case"end":return e.stop()}},qi)}function Pa(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)($e,ba);case 2:case"end":return e.stop()}},Ji)}function Na(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Ze,va);case 2:case"end":return e.stop()}},Zi)}function Da(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(Ke,ya);case 2:case"end":return e.stop()}},Xi)}function Ea(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(ct,ha);case 2:case"end":return e.stop()}},Qi)}function Ta(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(ot,ga);case 2:case"end":return e.stop()}},ea)}function Ra(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.f)(tt,wa);case 2:case"end":return e.stop()}},ta)}function Ma(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(li.a)([Object(li.c)(Oa),Object(li.c)(Ca),Object(li.c)(Sa),Object(li.c)(xa),Object(li.c)(ja),Object(li.c)(ka),Object(li.c)(Ia),Object(li.c)(Pa),Object(li.c)(Na),Object(li.c)(Da),Object(li.c)(Ea),Object(li.c)(Ta),Object(li.c)(Ra)]);case 2:case"end":return e.stop()}},na)}function Ya(e,t){return Ba.apply(this,arguments)}function Ba(){return(Ba=ji(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn()({method:"POST",url:t,data:n,headers:oa,config:{headers:{Authorization:"Bearer ".concat(ra),"Content-Type":"application/json"}}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fa(e,t){return Wa.apply(this,arguments)}function Wa(){return(Wa=ji(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn()({method:"POST",url:t,data:n,headers:oa,config:{headers:{Authorization:"Bearer ".concat(ra),"Content-Type":"application/json"}}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ha(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=ji(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn()({method:"POST",url:t,data:n,headers:oa,config:{headers:{Authorization:"Bearer ".concat(ra),"Content-Type":"application/x-www-form-urlencoded"}}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function za(e,t,n,r){Ii||(Ii="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:Ii,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function La(e){return(La="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ga(e,t){return!t||"object"!==La(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"AppointmentPage",function(){return Ja}),n.d(t,"mapDispatchToProps",function(){return Za});var qa=za(i.c.div.withConfig({displayName:"AppointmentPage__AppointmentPageWrapper",componentId:"sc-1dgxsnd-0"})(["width:100%;height:100%;"]),{},void 0,za(Kt,{}),za(zn,{}),za(Mr,{}),za(Io,{}),za(di,{}),za(si.a,{})),Ja=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ga(this,Va(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return qa}}])&&$a(n.prototype,r),i&&$a(n,i),t}();function Za(){return{}}var Xa,Qa,ec,tc=Object(u.b)({}),nc=Object(c.connect)(tc,Za),rc=(Qa=(Xa={key:"appointment",reducer:bt}).key,ec=Xa.reducer,function(e){var t=function(t){function n(){var e,t,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return r=this,t=!(o=(e=P(n)).call.apply(e,[this].concat(c)))||"object"!==k(o)&&"function"!==typeof o?N(r):o,E(N(t),"injectors",(S(i=t.context.store),{injectReducer:x(i,!0)})),t}var r,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(n,o.a.Component),r=n,(i=[{key:"componentWillMount",value:function(){(0,this.injectors.injectReducer)(Qa,ec)}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}])&&I(r.prototype,i),a&&I(r,a),n}();return E(t,"WrappedComponent",e),E(t,"contextTypes",{store:d.a.object.isRequired}),E(t,"displayName","withReducer(".concat(e.displayName||e.name||"Component",")")),f()(t,e)}),oc=function(e){var t=e.key,n=e.saga,r=e.mode;return function(e){var i=function(i){function a(){var e,t,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return n=this,t=!(r=(e=G(a)).call.apply(e,[this].concat(c)))||"object"!==L(r)&&"function"!==typeof r?V(n):r,q(V(t),"injectors",(S(o=t.context.store),{injectSaga:U(o,!0),ejectSaga:z(o,!0)})),t}var c,u,p;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(a,o.a.Component),c=a,(u=[{key:"componentWillMount",value:function(){(0,this.injectors.injectSaga)(t,{saga:n,mode:r},this.props)}},{key:"componentWillUnmount",value:function(){(0,this.injectors.ejectSaga)(t)}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}])&&$(c.prototype,u),p&&$(c,p),a}();return q(i,"WrappedComponent",e),q(i,"contextTypes",{store:d.a.object.isRequired}),q(i,"displayName","withSaga(".concat(e.displayName||e.name||"Component",")")),f()(i,e)}}({key:"appointment",saga:Ma});t.default=Object(a.compose)(rc,oc,nc)(Ja)},a230b9763ddae96228aa:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeBAMAAADJHrORAAAAMFBMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlTPQ5AAAAD3RSTlMAd2YE3he9Cdaqly315Djb3zZZAAAAUElEQVQY02NgQAbMXxhQ+dcY8IPXDPj1zyKgX4iA/iHIZ1+Kyi/7icJnz29F4Zf9F1JCgC8M6/8jgy8MEX8EkYAQA2t/OqqdET9R+azZyDwAKzguXf0fo4sAAAAASUVORK5CYII="}}]);